!(function (a, b) {
    "object" == typeof exports
        ? (module.exports = b())
        : "function" == typeof define && define.amd
        ? define([], b)
        : (a.Circles = b());
})(this, function () {
    "use strict";
    var a =
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function (a) {
                setTimeout(a, 1e3 / 60);
            },
        b = function (a) {
            var b = a.id;
            if (((this._el = document.getElementById(b)), null !== this._el)) {
                (this._radius = a.radius || 10),
                    (this._duration = void 0 === a.duration ? 500 : a.duration),
                    (this._value = 0),
                    (this._maxValue = a.maxValue || 100),
                    (this._totalEmployees = a.totalEmployees || 0),  // Total Employees
                    (this._count = a.count || 0),  // Count
                    (this._projects = a.projects || 0),  // Projects
                    (this._text =
                        void 0 === a.text
                            ? function (a) {
                                  return this.htmlifyNumber(a);
                              }
                            : a.text),
                    (this._strokeWidth = a.width || 10),
                    (this._colors = a.colors || ["#EEE", "#F00"]),
                    (this._svg = null),
                    (this._movingPath = null),
                    (this._wrapContainer = null),
                    (this._textContainer = null),
                    (this._employeesContainer = null), // Container for Employees
                    (this._countContainer = null), // Container for Count
                    (this._projectsContainer = null), // Container for Projects
                    (this._wrpClass = a.wrpClass || "circles-wrp"),
                    (this._textClass = a.textClass || "circles-text"),
                    (this._valClass =
                        a.valueStrokeClass || "circles-valueStroke"),
                    (this._maxValClass =
                        a.maxValueStrokeClass || "circles-maxValueStroke"),
                    (this._styleWrapper = a.styleWrapper === !1 ? !1 : !0),
                    (this._styleText = a.styleText === !1 ? !1 : !0);
                var c = (Math.PI / 180) * 270;
                (this._start = (-Math.PI / 180) * 90),
                    (this._startPrecise = this._precise(this._start)),
                    (this._circ = c - this._start),
                    this._generate().update(a.value || 0);
            }
        };
    return (
        (b.prototype = {
            VERSION: "0.0.6",
            _generate: function () {
                return (
                    (this._svgSize = 2 * this._radius),
                    (this._radiusAdjusted =
                        this._radius - this._strokeWidth / 2),
                    this._generateSvg()
                        ._generateText()
                        ._generateEmployees()
                        ._generateCount()
                        ._generateProjects()
                        ._generateWrapper(),
                    (this._el.innerHTML = ""),
                    this._el.appendChild(this._wrapContainer),
                    this
                );
            },
            _setPercentage: function (a) {
                this._movingPath.setAttribute("d", this._calculatePath(a, !0)),
                    (this._textContainer.innerHTML = this._getText(
                        this.getValueFromPercent(a)
                    ));
            },
            _generateWrapper: function () {
                return (
                    (this._wrapContainer = document.createElement("div")),
                    (this._wrapContainer.className = this._wrpClass),
                    this._styleWrapper &&
                        ((this._wrapContainer.style.position = "relative"),
                        (this._wrapContainer.style.display = "inline-block")),
                    this._wrapContainer.appendChild(this._svg),
                    this._wrapContainer.appendChild(this._textContainer),
                    this._wrapContainer.appendChild(this._employeesContainer), // Append Employees
                    this._wrapContainer.appendChild(this._countContainer), // Append Count
                    this._wrapContainer.appendChild(this._projectsContainer), // Append Projects
                    this
                );
            },
            _generateText: function () {
                if (
                    ((this._textContainer = document.createElement("div")),
                    (this._textContainer.className = this._textClass),
                    this._styleText)
                ) {
                    var a = {
                        position: "absolute",
                        top: 0,
                        left: 0,
                        textAlign: "center",
                        width: "100%",
                        fontSize: 0.7 * this._radius + "px",
                        height: this._svgSize + "px",
                        lineHeight: this._svgSize + "px",
                    };
                    for (var b in a) this._textContainer.style[b] = a[b];
                }
                return (this._textContainer.innerHTML = this._getText(0)), this;
            },
            _generateEmployees: function () {
                this._employeesContainer = document.createElement("div");
                this._employeesContainer.className = "employees-info";
                this._employeesContainer.innerHTML =
                    "Total Employees: " + this._totalEmployees;
                return this;
            },
            _generateCount: function () {
                this._countContainer = document.createElement("div");
                this._countContainer.className = "count-info";
                this._countContainer.innerHTML = "Count: " + this._count;
                return this;
            },
            _generateProjects: function () {
                this._projectsContainer = document.createElement("div");
                this._projectsContainer.className = "projects-info";
                this._projectsContainer.innerHTML = "Projects: " + this._projects;
                return this;
            },
            _getText: function (a) {
                return this._text
                    ? (void 0 === a && (a = this._value),
                      (a = parseFloat(a.toFixed(2))),
                      "function" == typeof this._text
                          ? this._text.call(this, a)
                          : this._text)
                    : "";
            },
            update: function (b, c) {
                if (b === !0)
                    return this._setPercentage(this.getPercent()), this;
                if (this._value == b || isNaN(b)) return this;
                void 0 === c && (c = this._duration);
                var d,
                    e,
                    f,
                    g,
                    h = this,
                    i = h.getPercent(),
                    j = 1;
                return (
                    (this._value = Math.min(this._maxValue, Math.max(0, b))),
                    c
                        ? ((d = h.getPercent()),
                          (e = d > i),
                          (j += d % 1),
                          (f = Math.floor(Math.abs(d - i) / j)),
                          (g = c / f),
                          (function k(b) {
                              if (
                                  (e ? (i += j) : (i -= j),
                                  (e && i >= d) || (!e && d >= i))
                              )
                                  return void a(function () {
                                      h._setPercentage(d);
                                  });
                              a(function () {
                                  h._setPercentage(i);
                              });
                              var c = Date.now(),
                                  f = c - b;
                              f >= g
                                  ? k(c)
                                  : setTimeout(function () {
                                        k(Date.now());
                                    }, g - f);
                          })(Date.now()),
                          this)
                        : (this._setPercentage(this.getPercent()), this)
                );
            },
        }),
        (b.create = function (a) {
            return new b(a);
        }),
        b
    );
});
